{local f is "1:/fsm.state.ks".put({parameter d.local r is 0.if exists(f)set r to get("fsm.state.ks").local s is list().local e is lex().local n is{parameter m is r+1.if m<0 set r to r+m. else set r to m. if not exists(f)create(f).local h is open(f).h:clear().h:write("put("+r+").").}.d(s,e,n).return{until r>=s:length{s[r]().for v in e:values v().wait 0.}}.}).}